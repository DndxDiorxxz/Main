

local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local Teams = game:GetService("Teams")
local Camera = workspace.CurrentCamera

local camlockEnabled = false
local target = nil


local function getClosestEnemy()
    local closestDistance = math.huge
    local closestPlayer = nil
    local localPlayer = Players.LocalPlayer

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= localPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            -- Ignore teammates
            if not player.Team or player.Team ~= localPlayer.Team then
                local distance = (player.Character.HumanoidRootPart.Position - localPlayer.Character.HumanoidRootPart.Position).magnitude
                if distance < closestDistance then
                    closestDistance = distance
                    closestPlayer = player
                end
            end
        end
    end

    return closestPlayer
end


local function lockCamera()
    if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
        Camera.CFrame = CFrame.new(Camera.CFrame.Position, target.Character.HumanoidRootPart.Position)
    else
        camlockEnabled = false -- Disable if target is invalid
        print("Target lost. Camlock disabled.")
    end
end


UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.E then -- Press 'E' to toggle Camlock
        camlockEnabled = not camlockEnabled

        if camlockEnabled then
            target = getClosestEnemy()
            if target then
                print("Camlock enabled on: " .. target.Name)
            else
                print("No enemy target found. Camlock disabled.")
                camlockEnabled = false
            end
        else
            print("Camlock disabled.")
            target = nil
        end
    end
end)


RunService.RenderStepped:Connect(function()
    if camlockEnabled then
        lockCamera()
    end
end)



local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer


local function createESP(character)
    if not character then return end


    if character:FindFirstChild("ESP_Highlight") then return end

    local highlight = Instance.new("Highlight")
    highlight.Name = "ESP_Highlight"
    highlight.Parent = character
    highlight.FillColor = Color3.fromRGB(255, 0, 0) -- Red color
    highlight.FillTransparency = 0.5
    highlight.OutlineColor = Color3.fromRGB(255, 255, 255) -- White outline
    highlight.OutlineTransparency = 0

    
    character.Destroying:Connect(function()
        highlight:Destroy()
    end)
end


local function applyESP(player)
    if player == LocalPlayer then return end -- Ignore local player

    
    player.CharacterAdded:Connect(function(character)
        task.wait(0.5) -- Small delay to ensure the character loads
        createESP(character)
    end)

    
    if player.Character then
        createESP(player.Character)
    end
end


for _, player in ipairs(Players:GetPlayers()) do
    applyESP(player)
end

Players.PlayerAdded:Connect(applyESP) 

